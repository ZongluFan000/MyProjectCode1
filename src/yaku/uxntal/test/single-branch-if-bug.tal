 @proc-n-items-from-ws
ROT
STHk

&loop
#00 EQU

?&end STH2k

JSR2
STH2r
STHr
#01 SUB
STHk
!&loop
&end
POPr
POP2
JMP2r


 ( is replaced by )
 
(
@proc-n-items-from-ws
 ROT
 STHk
 
&loop
 #00 EQU
 
 POP2
 
 JSR2
 STH2r
 STHr
 #01 SUB
 STHk
 !&loop 
&end
 POPr
 POP2
 JMP2r
 )
 (
 So the ?&end STH2k is replaced by POP2
 I suspect this is because the cond is single-branch and that is not handled properly

 
 )

